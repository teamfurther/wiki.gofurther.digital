<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="robots" content="noindex,nofollow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Laravel Best Practices | Further Wiki</title>

    <link rel="shortcut icon" type="image/png" href="https://wiki.gofurther.digital/dist/img/favicon.png" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Kanit:400,600,700&amp;subset=latin-ext" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:400,700&amp;subset=latin-ext" />

    <link rel="stylesheet" href="https://wiki.gofurther.digital/dist/css/site.css?v191219" />
</head>

<body id="#top">

    <div class="sidebar">
        <div class="sidebar__contents">
            <header class="header">
                <a class="header__logo" href="https://gofurther.digital" target="_blank"><img src="https://wiki.gofurther.digital/dist/img/logo.svg?v2" title="Further Wiki" /></a>
            </header>
            <nav class="nav">
                <div class="nav__item">
                    <a href="https://wiki.gofurther.digital/">Home</a>
                </div>
                <div class="nav__item">
                    <a href="https://wiki.gofurther.digital/life">Life at Further</a>
                    <div class="nav__subnav">
                        <a href="https://wiki.gofurther.digital/life/onboarding">Onboarding</a>
                        <a href="https://wiki.gofurther.digital/life/stand-up-meetings">Stand-up Meetings</a>
                        <a href="https://wiki.gofurther.digital/life/communication">Communication</a>
                        <a href="https://wiki.gofurther.digital/life/perks">Perks</a>
                    </div>
                </div>
                <div class="nav__item">
                    <a href="https://wiki.gofurther.digital/coding">Coding</a>
                    <div class="nav__subnav">
                        <a href="https://wiki.gofurther.digital/coding/php">PHP</a>
                        <a href="https://wiki.gofurther.digital/coding/html">HTML</a>
                        <a href="https://wiki.gofurther.digital/coding/css">CSS</a>
                        <a href="https://wiki.gofurther.digital/coding/javascript">JavaScript</a>
                        <a href="https://wiki.gofurther.digital/coding/typescript">TypeScript</a>
                        <a href="https://wiki.gofurther.digital/coding/laravel-best-practices">Laravel Best Practices</a>
                        <a href="https://wiki.gofurther.digital/coding/vue-best-practices">Vue Best Practices</a>
                        <a href="https://wiki.gofurther.digital/coding/version-control">Version Control</a>
                        <a href="https://wiki.gofurther.digital/coding/server-and-ci-cd-setup">Server & CI/CD Set-up</a>
                        <a href="https://wiki.gofurther.digital/coding/testing">Testing</a>
                        <a href="https://wiki.gofurther.digital/coding/code-reviews">Code Reviews</a>
                    </div>
                </div>
                <div class="nav__item">
                    <a href="https://wiki.gofurther.digital/workflows">Workflows</a>
                    <div class="nav__subnav">
                        <a href="https://wiki.gofurther.digital/workflows/outbound-sales">Outbound Sales</a>
                        <a href="https://wiki.gofurther.digital/workflows/pre-sales">Pre-sales</a>
                        <a href="https://wiki.gofurther.digital/workflows/analysis-offer">Analysis & Offer</a>
                        <a href="https://wiki.gofurther.digital/workflows/project-management">Project Management</a>
                        <a href="https://wiki.gofurther.digital/workflows/bug-reports">Bug Reports</a>
                        <a href="https://wiki.gofurther.digital/workflows/finances">Finances</a>
                    </div>
                </div>
                <div class="nav__item">
                    <a href="https://wiki.gofurther.digital/marketing">Marketing</a>
                    <div class="nav__subnav">
                        <a href="https://wiki.gofurther.digital/marketing/blogging">Blogging</a>
                        <a href="https://wiki.gofurther.digital/marketing/newsletter">Newsletter</a>
                    </div>
                </div>
                <div class="nav__item">
                    <a href="https://wiki.gofurther.digital/security">Security</a>
                    <div class="nav__subnav">
                        <a href="https://wiki.gofurther.digital/security/information-security">Information Security</a>
                        <a href="https://wiki.gofurther.digital/security/physical-security">Physical Security</a>
                        <a href="https://wiki.gofurther.digital/security/business-continuity">Business Continuity</a>
                        <a href="https://wiki.gofurther.digital/security/incident-management">Incident Management</a>
                    </div>
                </div>
            </nav>
        </div>

        <footer class="footer">
            &copy; Further Digital Solutions
        </footer>
    </div>

    <a class="sidebar__toggle">
        <span></span>
        <span></span>
        <span></span>
    </a>

    <section class="content">
        <div class="article">
    <h1 class="article__title">Laravel Best Practices</h1>

    <p><small class="owner">Owner: Development</small> <em>Last revision: 12.11.2021</em></p>

<ul class="toc">
  <li><a href="#naming-conventions">Naming Conventions</a></li>
  <li><a href="#commands">Commands</a></li>
  <li><a href="#facades">Facades</a></li>
  <li><a href="#routing">Routing</a></li>
  <li><a href="#single-responsibility">Single Responsibility</a></li>
  <li><a href="#validation">Validation</a></li>
</ul>

<h2 id="naming-conventions">Naming Conventions<a href="#naming-conventions">#</a></h2>
<p>Naming things is often seen as one of the harder things in programming. That’s why we’ve established some high level guidelines for naming classes.</p>

<h3 id="naming-commands">Commands<a href="#naming-commands">#</a></h3>
<p>The names given to artisan commands should all be kebab-cased.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Good
php artisan delete-old-records

# Bad
php artisan deleteOldRecords
</code></pre></div></div>

<h3 id="naming-configuration-files">Configuration files<a href="#naming-configuration-files">#</a></h3>
<p>Configuration files must use kebab-case.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config/
  pdf-generator.php
</code></pre></div></div>

<p>Configuration keys must use snake_case.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// config/pdf-generator.php</span>
<span class="k">return</span> <span class="p">[</span>
    <span class="s1">'chrome_path'</span> <span class="o">=&gt;</span> <span class="nf">env</span><span class="p">(</span><span class="s1">'CHROME_PATH'</span><span class="p">),</span>
<span class="p">];</span>
</code></pre></div></div>

<p>Avoid using the <code class="highlighter-rouge">env</code> helper outside of configuration files. Create a configuration value from the <code class="highlighter-rouge">env</code> variable like above.</p>

<h3 id="naming-controllers">Controllers<a href="#naming-controllers">#</a></h3>
<p>Generally controllers are named by the plural form of their corresponding resource and a Controller suffix. This is to avoid naming collisions with models that are often equally named.</p>

<p>e.g. <code class="highlighter-rouge">UsersController</code> or <code class="highlighter-rouge">PostsController</code></p>

<p>Try to keep controllers simple and stick to the default CRUD keywords (index, create, store, show, edit, update, destroy). Extract a new controller if you need other actions.</p>

<p>In the following example, we could have <code class="highlighter-rouge">PostsController@favorite</code>, and <code class="highlighter-rouge">PostsController@unfavorite</code>, or we could extract it to a separate <code class="highlighter-rouge">FavoritePostsController</code>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">PostsController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">create</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">favorite</span><span class="p">(</span><span class="kt">Post</span> <span class="nv">$post</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">favorites</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">attach</span><span class="p">(</span><span class="nv">$post</span><span class="p">);</span>

        <span class="k">return</span> <span class="nf">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">unfavorite</span><span class="p">(</span><span class="kt">Post</span> <span class="nv">$post</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">favorites</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">detach</span><span class="p">(</span><span class="nv">$post</span><span class="p">);</span>

        <span class="k">return</span> <span class="nf">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here we fall back to default CRUD words, create and destroy.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">FavoritePostsController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">create</span><span class="p">(</span><span class="kt">Post</span> <span class="nv">$post</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">favorites</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">attach</span><span class="p">(</span><span class="nv">$post</span><span class="p">);</span>

        <span class="k">return</span> <span class="nf">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">destroy</span><span class="p">(</span><span class="kt">Post</span> <span class="nv">$post</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">favorites</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">detach</span><span class="p">(</span><span class="nv">$post</span><span class="p">);</span>

        <span class="k">return</span> <span class="nf">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This is a loose guideline that doesn’t need to be enforced.</p>

<p>When writing non-resourceful controllers you might come across invokable controllers that perform a single action. These can be named by the action they perform again suffixed by Controller.</p>

<p>e.g. <code class="highlighter-rouge">PerformCleanupController</code></p>

<h3 id="naming-events">Events<a href="#naming-events">#</a></h3>
<p>Events will often be fired before or after the actual event. This should be very clear by the tense used in their name.</p>

<p>E.g. <code class="highlighter-rouge">ApprovingLoan</code> before the action is completed and <code class="highlighter-rouge">LoanApproved</code> after the action is completed.</p>

<h3 id="naming-form-requests">Form Requests<a href="#naming-form-requests">#</a></h3>
<p>Always name your form requests by the singular name of your resource, suffixed with <code class="highlighter-rouge">Request</code>.</p>

<p>e.g. <code class="highlighter-rouge">PostRequest</code></p>

<p>In some cases, you need separate form requests for the <code class="highlighter-rouge">create()</code> and <code class="highlighter-rouge">update()</code> controller methods. In these cases put the method name between the name of your resource and the <code class="highlighter-rouge">Request</code> suffix.</p>

<p>e.g. <code class="highlighter-rouge">PostCreateRequest</code> or <code class="highlighter-rouge">PostUpdateRequest</code></p>

<h3 id="naming-jobs">Jobs<a href="#naming-jobs">#</a></h3>
<p>A job’s name should describe its action.</p>

<p>E.g. <code class="highlighter-rouge">CreateUser</code> or <code class="highlighter-rouge">PerformDatabaseCleanup</code></p>

<h3 id="naming-listeners">Listeners<a href="#naming-listeners">#</a></h3>
<p>Listeners will perform an action based on an incoming event. Their name should reflect that action with a <code class="highlighter-rouge">Listener</code> suffix. This might seem strange at first but will avoid naming collisions with jobs.</p>

<p>E.g. <code class="highlighter-rouge">SendInvitationMailListener</code></p>

<h3 id="naming-mailables">Mailables<a href="#naming-mailables">#</a></h3>
<p>Again to avoid naming collisions we’ll suffix mailables with <code class="highlighter-rouge">Mail</code>, as they’re often used to convey an event, action or question.</p>

<p>e.g. <code class="highlighter-rouge">AccountActivatedMail</code> or <code class="highlighter-rouge">NewEventMail</code></p>

<h3 id="naming-models">Models<a href="#naming-models">#</a></h3>
<p>Always name your models by the singular name of your resource.</p>

<p>e.g. <code class="highlighter-rouge">User</code> or <code class="highlighter-rouge">Post</code></p>

<h3 id="naming-notifications">Notifications<a href="#naming-notifications">#</a></h3>
<p>Again to avoid naming collisions we’ll suffix notifications with <code class="highlighter-rouge">Notification</code>, as they’re often used to convey an event, action or question.</p>

<p>e.g. <code class="highlighter-rouge">AccountActivatedNotification</code> or <code class="highlighter-rouge">NewEventNotication</code></p>

<h3 id="naming-tests">Tests<a href="#naming-tests">#</a></h3>
<p>Function names of tests cases should always begin with <code class="highlighter-rouge">test</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public function testIfPageReturns200(): void
{
        $response = $this-&gt;json('POST', 'page', [
            'somedata' =&gt; 'Data',
        ]);

        $response-&gt;assertStatus(200);
}
</code></pre></div></div>

<h3 id="naming-views">Views<a href="#naming-views">#</a></h3>
<p>View files must use kebab-case.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resources/
    views/
        pages/
            cookies-policy.blade.php
</code></pre></div></div>

<h2 id="commands">Commands<a href="#commands">#</a></h2>
<p>A command should always give some feedback on what the result is. Minimally you should let the <code class="highlighter-rouge">handle</code> method spit out a comment at the end indicating that all went well.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in a Command</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">handle</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// do some work</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">comment</span><span class="p">(</span><span class="s1">'All ok!'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If possible use a descriptive success message eg. <code class="highlighter-rouge">Old records deleted</code>.</p>

<h2 id="facades">Facades<a href="#facades">#</a></h2>
<p>Whenever possible, avoid using facades in controllers, models or actions.</p>

<p>Instead, use a the available helper function or inject the underlying class into your object. Use the <a href="https://laravel.com/docs/master/facades#facade-class-reference">Facade Class Reference</a> to find the underlying class.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="nf">session</span><span class="p">([</span><span class="s1">'cart'</span> <span class="o">=&gt;</span> <span class="nv">$data</span><span class="p">]);</span>

<span class="c1">// Bad</span>
<span class="nc">Session</span><span class="o">::</span><span class="nf">put</span><span class="p">(</span><span class="s1">'cart'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="kn">use</span> <span class="nc">Illuminate\Database\DatabaseManager</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MyClass</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$db</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="kt">DatabaseManager</span> <span class="nv">$db</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">db</span> <span class="o">=</span> <span class="nv">$db</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">public</span> <span class="k">function</span> <span class="n">getComplexQueryResult</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">db</span><span class="o">-&gt;</span><span class="nf">raw</span><span class="p">(</span><span class="s2">"..."</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Bad</span>
<span class="kd">class</span> <span class="nc">MyClass</span>
<span class="p">{</span>    
    <span class="k">public</span> <span class="k">function</span> <span class="n">getComplexQueryResult</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="no">DB</span><span class="o">::</span><span class="nf">raw</span><span class="p">(</span><span class="s2">"..."</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="routing">Routing<a href="#routing">#</a></h2>
<p>Public-facing urls must use kebab-case.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://gofurther.digital/en/custom-software-development
https://gofurther.digital/en/blog/posts/digital-transformation-pt1-introduction
</code></pre></div></div>

<p>Route names must use kebab-case with dot notation.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">,</span> <span class="s1">'CustomSoftwareDevelopmentController@show'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'blog/posts/{blogPath}'</span><span class="p">,</span> <span class="s1">'BlogController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'blog.show'</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">,</span> <span class="s1">'CustomSoftwareDevelopmentController@show'</span><span class="p">)</span>
       <span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'customSoftwareDevelopment'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'blog/posts/{blogPath}'</span><span class="p">,</span> <span class="s1">'BlogController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'blog-show'</span><span class="p">);</span>
</code></pre></div></div>

<p>When defining routes, use method chaining instead of the array notation.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">,</span> <span class="s1">'CustomSoftwareDevelopmentController@show'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">'as'</span> <span class="o">=&gt;</span> <span class="s1">'custom-software-development'</span><span class="p">,</span>
    <span class="s1">'uses'</span> <span class="o">=&gt;</span> <span class="s1">'CustomSoftwareDevelopmentController@show'</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>All routes have an http verb, that’s why we like to put the verb first when defining a route. It makes a group of routes very readable. Any other route options should come after it.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">,</span> <span class="s1">'CustomSoftwareDevelopmentController@show'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">name</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">,</span> <span class="s1">'CustomSoftwareDevelopmentController@show'</span><span class="p">);</span>
</code></pre></div></div>

<p>Route parameters should use camelCase.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'blog/posts/{blogPath}'</span><span class="p">,</span> <span class="s1">'BlogController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'blog.show'</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'blog/posts/{blog_path}'</span><span class="p">,</span> <span class="s1">'BlogController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'blog.show'</span><span class="p">);</span>
</code></pre></div></div>

<p>A route url should not start with <code class="highlighter-rouge">/</code> unless the url would be an empty string.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="s1">'HomeController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">,</span> <span class="s1">'CustomSoftwareDevelopmentController@show'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="s1">'HomeController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'home'</span><span class="p">);</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/custom-software-development'</span><span class="p">,</span> <span class="s1">'CustomSoftwareDevelopmentController@show'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'custom-software-development'</span><span class="p">);</span>
</code></pre></div></div>

<p>If your route only needs to return a view, you may use the <code class="highlighter-rouge">Route::view</code> method.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">view</span><span class="p">(</span><span class="s1">'privacy-policy'</span><span class="p">,</span> <span class="s1">'pages.privacy'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'privacy'</span><span class="p">);</span>

<span class="c1">// Bad</span>
<span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'privacy-policy'</span><span class="p">,</span> <span class="s1">'PrivacyPolicyController@show'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">name</span><span class="p">(</span><span class="s1">'privacy'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="single-responsibility">Single Responsibility<a href="#single-responsibility">#</a></h2>
<p>A controller must only have the responsibility to return a response. Move business logic from controllers to injectable action classes.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">saveArticleImageAction</span><span class="o">-&gt;</span><span class="nf">execute</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="nb">file</span><span class="p">(</span><span class="s1">'image'</span><span class="p">));</span>

    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">SaveArticleImageAction</span> <span class="kd">implements</span> <span class="nc">ActionInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">execute</span><span class="p">(...</span><span class="nv">$args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_null</span><span class="p">(</span><span class="nv">$args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nv">$image</span><span class="o">-&gt;</span><span class="nf">move</span><span class="p">(</span><span class="nf">public_path</span><span class="p">(</span><span class="s1">'images'</span><span class="p">)</span> <span class="mf">.</span> <span class="s1">'temp'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Bad</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">hasFile</span><span class="p">(</span><span class="s1">'image'</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="nb">file</span><span class="p">(</span><span class="s1">'image'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">move</span><span class="p">(</span><span class="nf">public_path</span><span class="p">(</span><span class="s1">'images'</span><span class="p">)</span> <span class="mf">.</span> <span class="s1">'temp'</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="validation">Validation<a href="#validation">#</a></h2>
<p>In most cases it is preferable to move validation in separate form request classes.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">PostRequest</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>    
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">PostRequest</span> <span class="kd">extends</span> <span class="nc">Request</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">rules</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'required|unique:posts|max:255'</span><span class="p">,</span>
            <span class="s1">'body'</span> <span class="o">=&gt;</span> <span class="s1">'required'</span><span class="p">,</span>
            <span class="s1">'publish_at'</span> <span class="o">=&gt;</span> <span class="s1">'nullable|date'</span><span class="p">,</span>
        <span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="c1">// Bad</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">validate</span><span class="p">([</span>
        <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'required|unique:posts|max:255'</span><span class="p">,</span>
        <span class="s1">'body'</span> <span class="o">=&gt;</span> <span class="s1">'required'</span><span class="p">,</span>
        <span class="s1">'publish_at'</span> <span class="o">=&gt;</span> <span class="s1">'nullable|date'</span><span class="p">,</span>
    <span class="p">]);</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When using multiple rules for one field in a form request, avoid using <code class="highlighter-rouge">|</code>, always use array notation. Using an array notation will make it easier to apply custom rule classes to a field.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Good</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">rules</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'required'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">],</span>
    <span class="p">];</span>
<span class="p">}</span>

<span class="c1">// Bad</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">rules</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">'required|email'</span><span class="p">,</span>
    <span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Custom validation rules should be always defined using a rule object instead of closures or extending the <code class="highlighter-rouge">Validator</code> facade.</p>

</div>

    </section>

    <a class="back-to-top" href="#top"></a>

<script src="https://wiki.gofurther.digital/dist/js/site.js"></script>

</body>

</html>
